version: '2'

services:
    postgres:
        image: postgres:9.4
        env_file: ./config/env
        volumes:
            - ./pgdata:/var/lib/postgresql/data
    backend:
        volumes:
            - ./backend:/home/blog/backend
        env_file: ./config/env
        build: ./backend
        working_dir: /home/blog/backend
        command: python3.5 manage.py runserver 0.0.0.0:8000
        container_name: blog_backend
        depends_on:
          - postgres
        links:
           - postgres
        ports:
          - '8000:8000'

    frontend:
        image: nginx
        working_dir: /home/frontend
        ports:
            - '80:80'
        volumes:
            - ./frontend:/usr/share/nginx/html

